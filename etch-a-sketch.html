<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Etch a Sketch</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="button-container">
        <div class="dimension-container" style="display: block;">
            <button id="restart">Change dinensions</button>
            <div class="input">
                <input type="number" class="dimensions" min="0" max="100" style="display: none;">
                <input type="button" class="submit" value="Submit" style="display: none;">
            </div>
        </div>
        <button id="clear">Clear</button>
    </div>
    <div id="container"></div>

    <script>
        const container = document.getElementById('container');
        const restart = document.getElementById('restart');
        const clear = document.getElementById('clear');
        const dimensions = document.querySelector('.dimensions');
        const submit = document.querySelector('.submit');


        clear.addEventListener('click',function () {
            const grid = document.querySelectorAll('.square');
            grid.forEach(function (grid) {
                grid.style.backgroundColor = 'white'
            })
        });


        function clearContainer() {
            while (container.firstChild) {
                container.removeChild(container.firstChild);
            }
        }
        const numberOfSquares = 256;
        for (let i = 0; i < numberOfSquares; i++) {
                const grid = document.createElement('div');
                grid.classList.add("square");

                grid.addEventListener('click', function () {
                grid.style.backgroundColor = 'black';
                });
            container.appendChild(grid);
        }


        function updateSquareWidth(newWidth) {
            container.style.setProperty('--square-width', newWidth);
        }

        function givePrompt() {
            const userNumber = Number(dimensions.value);
            const numberOfSquares =  userNumber * userNumber;
            for (let i = 0; i < numberOfSquares; i++) {
                const grid = document.createElement('div');
                grid.classList.add("square");

                grid.addEventListener('click', function () {
                grid.style.backgroundColor = 'black';
                });

            container.appendChild(grid);
            }

        updateSquareWidth(`${100 / Math.sqrt(numberOfSquares)}%`);
        }

        restart.addEventListener('click', function () {
            const dimensions = document.querySelector('.dimensions');
            const submit = document.querySelector('.submit');
            dimensions.style.display = 'inline';
            submit.style.display = 'inline';
        })

        submit.addEventListener('click',function () {
            clearContainer();
            givePrompt();
            const dimensions = document.querySelector('.dimensions');
            const submit = document.querySelector('.submit');
            dimensions.style.display = 'none';
            submit.style.display = 'none';
        });
        
    </script>
</body>

</html>